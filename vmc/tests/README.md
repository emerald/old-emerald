# `vmc` tests

The role of `vmc` in the Emerald compiler is presently unclear, hence
its intended behaviour is also presently unclear.

The purpose of this test-suite is therefore merely to make a snapshot
of the _current_ behaviour of `vmc`, before subsequent changes are
made to the code base (e.g., to bring `vmc` up-to-date with
contemporary C development standards).

## Design

`vmc` is a compiler that generates C code. These tests are therefore
structured as follows:

1. The code generated for the empty file [empty.desc](data/empty.desc)
   is stored in Git as [empty.desc.c](data/empty.desc.c),
   [empty.desc.h](data/empty.desc.h), and
   [empty.desc_i.h](data/empty.desc_i.h).
2. For all other sample inputs (e.g.,
   [empty_defs.desc](data/empty_defs.desc)), only the input file and
   a _patch_ are stored to reduce code duplication.
  1. The patch is generated by [gen-patch.sh](gen-patch.sh).
  2. The code generated for a given input file can be restored from
     the patch using [gen-data.sh](gen-data.sh).
